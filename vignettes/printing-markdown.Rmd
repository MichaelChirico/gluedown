---
title: "Priting Markdown"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Priting Markdown}
  %\VignetteEncoding{UTF-8}
  %\VignetteEngine{knitr::rmarkdown}
editor_options: 
  chunk_output_type: console
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r libraries, warning=FALSE, message=FALSE, error=FALSE}
library(gluedown)
library(stringr)
library(rvest)
```

Markdown is a lightweight plain-text language used to format text. Let's look at
the original description of markdown from John Gruber's website, the creator of
the markdown standard.

```{r markdown_desc}
markdown_blog <- 
  read_html("https://daringfireball.net/projects/markdown/") %>% 
  html_nodes("p") %>% 
  html_text()
```

Right off the bat, Gruber explains _what_ exactly markdown is.

```{r quote_what, results='asis'}
md_quote(markdown_blog[4])
```

He continues by outlining _why_ markdown was created, his rationale for it's
format, and some inspiration for it's syntax.

```{r quote_why, results='asis'}
md_quote(markdown_blog[6])
```

This entire vignette was written in markdown and converted to HTML using pandoc.
However, as you may have noticed, I haven't exactly been conforming to Gruber's
original desire for markdown to be readable as is. I didn't copy the text from
his blog and past it as text into this vignette. This is where the `gluedown`
package comes in.

The `gluedown` package helps ease the transition between the incredibly powerful
vector support in R and the readability of markdown. Since this vignette was
written using R Markdown, which combined R code and text to create full markdown
files which can then be converted to pandoc to HTML, PDF, or any other number of
formats.

Using the `rvest` package, I was able to programatically scrape Gruber's blog,
extract HTML paragraph tags, and convert those tags to character vectors. Then,
using `md_quote()`, those vectors were printed directly as block markdown block
quotes, which were then converted _back_ to beautiful HTML block quotes in the
final version of this vignette. The rest of this vignette will explain all the
ways `gluedown` can convert R vectors to formatted markdown text.

### Lists

Printing vectors as markdown lists was the initial inspiration for the package.
Here, we also see how _inline_ functions can be used within _block_ functions.

```{r ex_list, results='asis'}
md_list(state.name[1:3], cat = TRUE)
```

```{r ex_others, results='asis'}
inlines <- c(
  md_bold(state.name[4]),
  md_code(state.name[5]),
  md_link(state.name[6], "https://Colorado.gov"),
  md_italic(state.name[7]),
  md_strike(state.name[8])
)

md_bullet(inlines, cat = TRUE)
```

### Pipes

All functions are designed to fit within the tidyverse ecosystem by working with
[pipes][pipe].

```{r ex_quote, results='asis'}
read_html("https://w.wiki/A58") %>% 
  html_node("blockquote") %>% 
  html_text(trim = TRUE) %>% 
  str_remove("\\[(.*)\\]") %>% 
  md_quote(cat = TRUE)
```

[pipe]: https://magrittr.tidyverse.org/reference/pipe.html

### Extensions

The package primarily uses [GitHub Flavored Markdown][gfm] (GFM), a
site-specific version of the [CommonMark specification][cm], an unambiguous
improvement on John Gruber's [original Markdown][df]. With this flavor, some
useful extensions like [task lists][task] are supported on GitHub. Elsewhere,
there may not work as well (or at all).

```{r ex_task, results='asis'}
legislation <- c("Houses passes", "Senate concurs", "President signs")
md_task(legislation, check = 1:2, cat = TRUE)
```

Some features aren't technically supported by GFM, but can be 
[forced by pandoc][pandoc]. With `md_define()`, definition lists are simply
rendered as funky bullet lists on GitHub.

```{r ex_define, results='asis'}
md_define("Democracy", def = "Government by the people", cat = TRUE)
```

[task]: https://help.github.com/en/articles/about-task-lists
[gfm]: https://github.github.com/gfm/
[cm]: https://spec.commonmark.org/
[df]: https://daringfireball.net/projects/markdown/
[pandoc]: https://pandoc.org/MANUAL.html#definition-lists

## Inline

You can also use `gluedown` to format R [inline code results][inline]. First,
use R to calculate a result.

```{r ex_inline}
rand <- sample(state.name, 1)
# `r md_bold(rand)`
```

Then, you can easily print that result in the middle of regular text with
markdown formatting. In this case, our randomly selected state is... 
`r md_bold(rand)`!
